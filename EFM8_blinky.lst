                 -1   $MODEFM8LB1
0000              1   ;--------------------------------------------------------
0000              2   ; Special Function Registers
0000              3   ;--------------------------------------------------------
0000              4   ACC            DATA 0xe0
0000              5   ADC0ASAH       DATA 0xb6
0000              6   ADC0ASAL       DATA 0xb5
0000              7   ADC0ASCF       DATA 0xa1
0000              8   ADC0ASCT       DATA 0xc7
0000              9   ADC0CF0        DATA 0xbc
0000             10   ADC0CF1        DATA 0xb9
0000             11   ADC0CF2        DATA 0xdf
0000             12   ADC0CN0        DATA 0xe8
0000             13   ADC0CN1        DATA 0xb2
0000             14   ADC0CN2        DATA 0xb3
0000             15   ADC0GTH        DATA 0xc4
0000             16   ADC0GTL        DATA 0xc3
0000             17   ADC0H          DATA 0xbe
0000             18   ADC0L          DATA 0xbd
0000             19   ADC0LTH        DATA 0xc6
0000             20   ADC0LTL        DATA 0xc5
0000             21   ADC0MX         DATA 0xbb
0000             22   B              DATA 0xf0
0000             23   CKCON0         DATA 0x8e
0000             24   CKCON1         DATA 0xa6
0000             25   CLEN0          DATA 0xc6
0000             26   CLIE0          DATA 0xc7
0000             27   CLIF0          DATA 0xe8
0000             28   CLKSEL         DATA 0xa9
0000             29   CLOUT0         DATA 0xd1
0000             30   CLU0CF         DATA 0xb1
0000             31   CLU0FN         DATA 0xaf
0000             32   CLU0MX         DATA 0x84
0000             33   CLU1CF         DATA 0xb3
0000             34   CLU1FN         DATA 0xb2
0000             35   CLU1MX         DATA 0x85
0000             36   CLU2CF         DATA 0xb6
0000             37   CLU2FN         DATA 0xb5
0000             38   CLU2MX         DATA 0x91
0000             39   CLU3CF         DATA 0xbf
0000             40   CLU3FN         DATA 0xbe
0000             41   CLU3MX         DATA 0xae
0000             42   CMP0CN0        DATA 0x9b
0000             43   CMP0CN1        DATA 0x99
0000             44   CMP0MD         DATA 0x9d
0000             45   CMP0MX         DATA 0x9f
0000             46   CMP1CN0        DATA 0xbf
0000             47   CMP1CN1        DATA 0xac
0000             48   CMP1MD         DATA 0xab
0000             49   CMP1MX         DATA 0xaa
0000             50   CRC0CN0        DATA 0xce
0000             51   CRC0CN1        DATA 0x86
0000             52   CRC0CNT        DATA 0xd3
0000             53   CRC0DAT        DATA 0xcb
0000             54   CRC0FLIP       DATA 0xcf
0000             55   CRC0IN         DATA 0xca
0000             56   CRC0ST         DATA 0xd2
0000             57   DAC0CF0        DATA 0x91
0000             58   DAC0CF1        DATA 0x92
0000             59   DAC0H          DATA 0x85
0000             60   DAC0L          DATA 0x84
0000             61   DAC1CF0        DATA 0x93
0000             62   DAC1CF1        DATA 0x94
0000             63   DAC1H          DATA 0x8a
0000             64   DAC1L          DATA 0x89
0000             65   DAC2CF0        DATA 0x95
0000             66   DAC2CF1        DATA 0x96
0000             67   DAC2H          DATA 0x8c
0000             68   DAC2L          DATA 0x8b
0000             69   DAC3CF0        DATA 0x9a
0000             70   DAC3CF1        DATA 0x9c
0000             71   DAC3H          DATA 0x8e
0000             72   DAC3L          DATA 0x8d
0000             73   DACGCF0        DATA 0x88
0000             74   DACGCF1        DATA 0x98
0000             75   DACGCF2        DATA 0xa2
0000             76   DERIVID        DATA 0xad
0000             77   DEVICEID       DATA 0xb5
0000             78   DPH            DATA 0x83
0000             79   DPL            DATA 0x82
0000             80   EIE1           DATA 0xe6
0000             81   EIE2           DATA 0xf3
0000             82   EIP1           DATA 0xbb
0000             83   EIP1H          DATA 0xee
0000             84   EIP2           DATA 0xed
0000             85   EIP2H          DATA 0xf6
0000             86   EMI0CN         DATA 0xe7
0000             87   FLKEY          DATA 0xb7
0000             88   HFO0CAL        DATA 0xc7
0000             89   HFO1CAL        DATA 0xd6
0000             90   HFOCN          DATA 0xef
0000             91   I2C0ADM        DATA 0xff
0000             92   I2C0CN0        DATA 0xba
0000             93   I2C0DIN        DATA 0xbc
0000             94   I2C0DOUT       DATA 0xbb
0000             95   I2C0FCN0       DATA 0xad
0000             96   I2C0FCN1       DATA 0xab
0000             97   I2C0FCT        DATA 0xf5
0000             98   I2C0SLAD       DATA 0xbd
0000             99   I2C0STAT       DATA 0xb9
0000            100   IE             DATA 0xa8
0000            101   IP             DATA 0xb8
0000            102   IPH            DATA 0xf2
0000            103   IT01CF         DATA 0xe4
0000            104   LFO0CN         DATA 0xb1
0000            105   P0             DATA 0x80
0000            106   P0MASK         DATA 0xfe
0000            107   P0MAT          DATA 0xfd
0000            108   P0MDIN         DATA 0xf1
0000            109   P0MDOUT        DATA 0xa4
0000            110   P0SKIP         DATA 0xd4
0000            111   P1             DATA 0x90
0000            112   P1MASK         DATA 0xee
0000            113   P1MAT          DATA 0xed
0000            114   P1MDIN         DATA 0xf2
0000            115   P1MDOUT        DATA 0xa5
0000            116   P1SKIP         DATA 0xd5
0000            117   P2             DATA 0xa0
0000            118   P2MASK         DATA 0xfc
0000            119   P2MAT          DATA 0xfb
0000            120   P2MDIN         DATA 0xf3
0000            121   P2MDOUT        DATA 0xa6
0000            122   P2SKIP         DATA 0xcc
0000            123   P3             DATA 0xb0
0000            124   P3MDIN         DATA 0xf4
0000            125   P3MDOUT        DATA 0x9c
0000            126   PCA0CENT       DATA 0x9e
0000            127   PCA0CLR        DATA 0x9c
0000            128   PCA0CN0        DATA 0xd8
0000            129   PCA0CPH0       DATA 0xfc
0000            130   PCA0CPH1       DATA 0xea
0000            131   PCA0CPH2       DATA 0xec
0000            132   PCA0CPH3       DATA 0xf5
0000            133   PCA0CPH4       DATA 0x85
0000            134   PCA0CPH5       DATA 0xde
0000            135   PCA0CPL0       DATA 0xfb
0000            136   PCA0CPL1       DATA 0xe9
0000            137   PCA0CPL2       DATA 0xeb
0000            138   PCA0CPL3       DATA 0xf4
0000            139   PCA0CPL4       DATA 0x84
0000            140   PCA0CPL5       DATA 0xdd
0000            141   PCA0CPM0       DATA 0xda
0000            142   PCA0CPM1       DATA 0xdb
0000            143   PCA0CPM2       DATA 0xdc
0000            144   PCA0CPM3       DATA 0xae
0000            145   PCA0CPM4       DATA 0xaf
0000            146   PCA0CPM5       DATA 0xcc
0000            147   PCA0H          DATA 0xfa
0000            148   PCA0L          DATA 0xf9
0000            149   PCA0MD         DATA 0xd9
0000            150   PCA0POL        DATA 0x96
0000            151   PCA0PWM        DATA 0xf7
0000            152   PCON0          DATA 0x87
0000            153   PCON1          DATA 0xcd
0000            154   PFE0CN         DATA 0xc1
0000            155   PRTDRV         DATA 0xf6
0000            156   PSCTL          DATA 0x8f
0000            157   PSTAT0         DATA 0xaa
0000            158   PSW            DATA 0xd0
0000            159   REF0CN         DATA 0xd1
0000            160   REG0CN         DATA 0xc9
0000            161   REVID          DATA 0xb6
0000            162   RSTSRC         DATA 0xef
0000            163   SBCON1         DATA 0x94
0000            164   SBRLH1         DATA 0x96
0000            165   SBRLL1         DATA 0x95
0000            166   SBUF           DATA 0x99
0000            167   SBUF0          DATA 0x99
0000            168   SBUF1          DATA 0x92
0000            169   SCON           DATA 0x98
0000            170   SCON0          DATA 0x98
0000            171   SCON1          DATA 0xc8
0000            172   SFRPAGE        DATA 0xa7
0000            173   SFRPGCN        DATA 0xbc
0000            174   SFRSTACK       DATA 0xd7
0000            175   SMB0ADM        DATA 0xd6
0000            176   SMB0ADR        DATA 0xd7
0000            177   SMB0CF         DATA 0xc1
0000            178   SMB0CN0        DATA 0xc0
0000            179   SMB0DAT        DATA 0xc2
0000            180   SMB0FCN0       DATA 0xc3
0000            181   SMB0FCN1       DATA 0xc4
0000            182   SMB0FCT        DATA 0xef
0000            183   SMB0RXLN       DATA 0xc5
0000            184   SMB0TC         DATA 0xac
0000            185   SMOD1          DATA 0x93
0000            186   SP             DATA 0x81
0000            187   SPI0CFG        DATA 0xa1
0000            188   SPI0CKR        DATA 0xa2
0000            189   SPI0CN0        DATA 0xf8
0000            190   SPI0DAT        DATA 0xa3
0000            191   SPI0FCN0       DATA 0x9a
0000            192   SPI0FCN1       DATA 0x9b
0000            193   SPI0FCT        DATA 0xf7
0000            194   SPI0PCF        DATA 0xdf
0000            195   TCON           DATA 0x88
0000            196   TH0            DATA 0x8c
0000            197   TH1            DATA 0x8d
0000            198   TL0            DATA 0x8a
0000            199   TL1            DATA 0x8b
0000            200   TMOD           DATA 0x89
0000            201   TMR2CN0        DATA 0xc8
0000            202   TMR2CN1        DATA 0xfd
0000            203   TMR2H          DATA 0xcf
0000            204   TMR2L          DATA 0xce
0000            205   TMR2RLH        DATA 0xcb
0000            206   TMR2RLL        DATA 0xca
0000            207   TMR3CN0        DATA 0x91
0000            208   TMR3CN1        DATA 0xfe
0000            209   TMR3H          DATA 0x95
0000            210   TMR3L          DATA 0x94
0000            211   TMR3RLH        DATA 0x93
0000            212   TMR3RLL        DATA 0x92
0000            213   TMR4CN0        DATA 0x98
0000            214   TMR4CN1        DATA 0xff
0000            215   TMR4H          DATA 0xa5
0000            216   TMR4L          DATA 0xa4
0000            217   TMR4RLH        DATA 0xa3
0000            218   TMR4RLL        DATA 0xa2
0000            219   TMR5CN0        DATA 0xc0
0000            220   TMR5CN1        DATA 0xf1
0000            221   TMR5H          DATA 0xd5
0000            222   TMR5L          DATA 0xd4
0000            223   TMR5RLH        DATA 0xd3
0000            224   TMR5RLL        DATA 0xd2
0000            225   UART0PCF       DATA 0xd9
0000            226   UART1FCN0      DATA 0x9d
0000            227   UART1FCN1      DATA 0xd8
0000            228   UART1FCT       DATA 0xfa
0000            229   UART1LIN       DATA 0x9e
0000            230   UART1PCF       DATA 0xda
0000            231   VDM0CN         DATA 0xff
0000            232   WDTCN          DATA 0x97
0000            233   XBR0           DATA 0xe1
0000            234   XBR1           DATA 0xe2
0000            235   XBR2           DATA 0xe3
0000            236   XOSC0CN        DATA 0x86
0000            237   ;--------------------------------------------------------
0000            238   ; special function bits
0000            239   ;--------------------------------------------------------
0000            240   ACC_0          BIT 0xe0
0000            241   ACC_1          BIT 0xe1
0000            242   ACC_2          BIT 0xe2
0000            243   ACC_3          BIT 0xe3
0000            244   ACC_4          BIT 0xe4
0000            245   ACC_5          BIT 0xe5
0000            246   ACC_6          BIT 0xe6
0000            247   ACC_7          BIT 0xe7
0000            248   TEMPE          BIT 0xe8
0000            249   ADGN0          BIT 0xe9
0000            250   ADGN1          BIT 0xea
0000            251   ADWINT         BIT 0xeb
0000            252   ADBUSY         BIT 0xec
0000            253   ADINT          BIT 0xed
0000            254   IPOEN          BIT 0xee
0000            255   ADEN           BIT 0xef
0000            256   B_0            BIT 0xf0
0000            257   B_1            BIT 0xf1
0000            258   B_2            BIT 0xf2
0000            259   B_3            BIT 0xf3
0000            260   B_4            BIT 0xf4
0000            261   B_5            BIT 0xf5
0000            262   B_6            BIT 0xf6
0000            263   B_7            BIT 0xf7
0000            264   C0FIF          BIT 0xe8
0000            265   C0RIF          BIT 0xe9
0000            266   C1FIF          BIT 0xea
0000            267   C1RIF          BIT 0xeb
0000            268   C2FIF          BIT 0xec
0000            269   C2RIF          BIT 0xed
0000            270   C3FIF          BIT 0xee
0000            271   C3RIF          BIT 0xef
0000            272   D1SRC0         BIT 0x88
0000            273   D1SRC1         BIT 0x89
0000            274   D1AMEN         BIT 0x8a
0000            275   D01REFSL       BIT 0x8b
0000            276   D3SRC0         BIT 0x8c
0000            277   D3SRC1         BIT 0x8d
0000            278   D3AMEN         BIT 0x8e
0000            279   D23REFSL       BIT 0x8f
0000            280   D0UDIS         BIT 0x98
0000            281   D1UDIS         BIT 0x99
0000            282   D2UDIS         BIT 0x9a
0000            283   D3UDIS         BIT 0x9b
0000            284   EX0            BIT 0xa8
0000            285   ET0            BIT 0xa9
0000            286   EX1            BIT 0xaa
0000            287   ET1            BIT 0xab
0000            288   ES0            BIT 0xac
0000            289   ET2            BIT 0xad
0000            290   ESPI0          BIT 0xae
0000            291   EA             BIT 0xaf
0000            292   PX0            BIT 0xb8
0000            293   PT0            BIT 0xb9
0000            294   PX1            BIT 0xba
0000            295   PT1            BIT 0xbb
0000            296   PS0            BIT 0xbc
0000            297   PT2            BIT 0xbd
0000            298   PSPI0          BIT 0xbe
0000            299   P0_0           BIT 0x80
0000            300   P0_1           BIT 0x81
0000            301   P0_2           BIT 0x82
0000            302   P0_3           BIT 0x83
0000            303   P0_4           BIT 0x84
0000            304   P0_5           BIT 0x85
0000            305   P0_6           BIT 0x86
0000            306   P0_7           BIT 0x87
0000            307   P1_0           BIT 0x90
0000            308   P1_1           BIT 0x91
0000            309   P1_2           BIT 0x92
0000            310   P1_3           BIT 0x93
0000            311   P1_4           BIT 0x94
0000            312   P1_5           BIT 0x95
0000            313   P1_6           BIT 0x96
0000            314   P1_7           BIT 0x97
0000            315   P2_0           BIT 0xa0
0000            316   P2_1           BIT 0xa1
0000            317   P2_2           BIT 0xa2
0000            318   P2_3           BIT 0xa3
0000            319   P2_4           BIT 0xa4
0000            320   P2_5           BIT 0xa5
0000            321   P2_6           BIT 0xa6
0000            322   P3_0           BIT 0xb0
0000            323   P3_1           BIT 0xb1
0000            324   P3_2           BIT 0xb2
0000            325   P3_3           BIT 0xb3
0000            326   P3_4           BIT 0xb4
0000            327   P3_7           BIT 0xb7
0000            328   CCF0           BIT 0xd8
0000            329   CCF1           BIT 0xd9
0000            330   CCF2           BIT 0xda
0000            331   CCF3           BIT 0xdb
0000            332   CCF4           BIT 0xdc
0000            333   CCF5           BIT 0xdd
0000            334   CR             BIT 0xde
0000            335   CF             BIT 0xdf
0000            336   PARITY         BIT 0xd0
0000            337   F1             BIT 0xd1
0000            338   OV             BIT 0xd2
0000            339   RS0            BIT 0xd3
0000            340   RS1            BIT 0xd4
0000            341   F0             BIT 0xd5
0000            342   AC             BIT 0xd6
0000            343   CY             BIT 0xd7
0000            344   RI             BIT 0x98
0000            345   TI             BIT 0x99
0000            346   RB8            BIT 0x9a
0000            347   TB8            BIT 0x9b
0000            348   REN            BIT 0x9c
0000            349   CE             BIT 0x9d
0000            350   SMODE          BIT 0x9e
0000            351   RI1            BIT 0xc8
0000            352   TI1            BIT 0xc9
0000            353   RBX1           BIT 0xca
0000            354   TBX1           BIT 0xcb
0000            355   REN1           BIT 0xcc
0000            356   PERR1          BIT 0xcd
0000            357   OVR1           BIT 0xce
0000            358   SI             BIT 0xc0
0000            359   ACK            BIT 0xc1
0000            360   ARBLOST        BIT 0xc2
0000            361   ACKRQ          BIT 0xc3
0000            362   STO            BIT 0xc4
0000            363   STA            BIT 0xc5
0000            364   TXMODE         BIT 0xc6
0000            365   MASTER         BIT 0xc7
0000            366   SPIEN          BIT 0xf8
0000            367   TXNF           BIT 0xf9
0000            368   NSSMD0         BIT 0xfa
0000            369   NSSMD1         BIT 0xfb
0000            370   RXOVRN         BIT 0xfc
0000            371   MODF           BIT 0xfd
0000            372   WCOL           BIT 0xfe
0000            373   SPIF           BIT 0xff
0000            374   IT0            BIT 0x88
0000            375   IE0            BIT 0x89
0000            376   IT1            BIT 0x8a
0000            377   IE1            BIT 0x8b
0000            378   TR0            BIT 0x8c
0000            379   TF0            BIT 0x8d
0000            380   TR1            BIT 0x8e
0000            381   TF1            BIT 0x8f
0000            382   T2XCLK0        BIT 0xc8
0000            383   T2XCLK1        BIT 0xc9
0000            384   TR2            BIT 0xca
0000            385   T2SPLIT        BIT 0xcb
0000            386   TF2CEN         BIT 0xcc
0000            387   TF2LEN         BIT 0xcd
0000            388   TF2L           BIT 0xce
0000            389   TF2H           BIT 0xcf
0000            390   T4XCLK0        BIT 0x98
0000            391   T4XCLK1        BIT 0x99
0000            392   TR4            BIT 0x9a
0000            393   T4SPLIT        BIT 0x9b
0000            394   TF4CEN         BIT 0x9c
0000            395   TF4LEN         BIT 0x9d
0000            396   TF4L           BIT 0x9e
0000            397   TF4H           BIT 0x9f
0000            398   T5XCLK0        BIT 0xc0
0000            399   T5XCLK1        BIT 0xc1
0000            400   TR5            BIT 0xc2
0000            401   T5SPLIT        BIT 0xc3
0000            402   TF5CEN         BIT 0xc4
0000            403   TF5LEN         BIT 0xc5
0000            404   TF5L           BIT 0xc6
0000            405   TF5H           BIT 0xc7
0000            406   RIE            BIT 0xd8
0000            407   RXTO0          BIT 0xd9
0000            408   RXTO1          BIT 0xda
0000            409   RFRQ           BIT 0xdb
0000            410   TIE            BIT 0xdc
0000            411   TXHOLD         BIT 0xdd
0000            412   TXNF1          BIT 0xde
0000            413   TFRQ           BIT 0xdf
0000              2   CSEG at 0H
0000 020010       3   ljmp main
0003              4   Wait_half_second:
0003              5   ;For a 6MHz clock one machine cycle takes 1/6.0000MHz=166.666ns
0003 7A19         6   mov R2, #25
0005 79FA         7   L3: mov R1, #250
0007 7878         8   L2: mov R0, #120
0009 D8FE         9   L1: djnz R0, L1 ; 4 machine cycles-> 4*166.666ns*120=80us
000B D9FA        10   djnz R1, L2 ; 80us*250=0.02s
000D DAF6        11   djnz R2, L3 ; 0.02s*25=0.5s
000F 22          12   ret
0010             13   main:
0010             14   ; DISABLE WDT: provide Watchdog disable keys
0010 7597DE      15   mov WDTCN, #0xDE ; First key
0013 7597AD      16   mov WDTCN, #0xAD ; Second key
0016 75817F      17   mov SP, #7FH
0019             18   ; Enable crossbar and weak pull-ups
0019 75E100      19   mov XBR0, #0x00
001C 75E200      20   mov XBR1, #0x00
001F 75E340      21   mov XBR2, #0x40
0022 75A602      22   mov P2MDOUT, #0x02 ; make LED pin (P2.1) output push-pull
0025 B2A1        23   M0: cpl P2.1 ; Led off/on
0027 120003      24   lcall Wait_half_second
002A 80F9        25   sjmp M0
002C             26   en
